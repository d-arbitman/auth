$("#login_submit").click(function(a){ajax_update("&nbsp;");a.preventDefault();if($("#user_name").val()==""||$("#password").val()==""){show_error("Both user name and password are required")}else{try_ajax("action=login&user_name="+encodeURIComponent($("#user_name").val())+"&password="+encodeURIComponent($("#password").val()))}});$(".logout_button").click(function(){try_ajax("action=logout")});function ajax_update(a){$("#ajax_update").html(a)}function try_ajax(a){$.ajax({url:"ajax.php",type:"POST",data:a,dataType:"JSON",error:function(d,b,c){show_error(c)},success:function(b){if(!b.logged_in){$("#content").hide();$("#login_box").show()}if(b.error){show_error(b.error)}else{if(b.logged_out){$("#content").hide();$("#login_box").show()}else{if(b.content_html){if($("#login_box").is(":visible")){$("#login_box").hide();$("#user_name").val("");$("#password").val("")}$("#content_add").html(b.content_html);$("#content").css("display","block")}}}}})}function show_error(a){ajax_update('<div class="error">'+a+"</div>")}function show_confirmation(a){ajax_update('<div class="confirmation">'+a+"</div>")};